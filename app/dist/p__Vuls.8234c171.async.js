(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[970],{90631:function(S,m,e){"use strict";e.d(m,{Z:function(){return C}});var w=e(28991),y=e(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},E=U,O=e(27029),g=function(F,v){return y.createElement(O.Z,(0,w.Z)((0,w.Z)({},F),{},{ref:v,icon:E}))};g.displayName="DownloadOutlined";var C=y.forwardRef(g)},23201:function(S,m,e){"use strict";e.r(m),e.d(m,{default:function(){return J}});var w=e(57663),y=e(71577),U=e(62350),E=e(75443),O=e(59250),g=e(13013),C=e(30887),x=e(99210),F=e(34792),v=e(48086),p=e(3182),A=e(94043),a=e.n(A),W=e(67294),$=e(57254),z=e(90631),V=e(24886),Y=e(8870),Z=e(48971),H=e(30381),M=e.n(H);function P(l){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Z.WY)("/api/vul/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:(0,Y.Z)({},r)}));case 1:case"end":return t.stop()}},l)})),I.apply(this,arguments)}function L(l){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r),t.abrupt("return",(0,Z.WY)("/api/vul/"+r.id+"/",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},data:{vul_status:r.vul_status}}));case 2:case"end":return t.stop()}},l)})),T.apply(this,arguments)}function G(l){return j.apply(this,arguments)}function j(){return j=(0,p.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r),t.abrupt("return",(0,Z.WY)("/api/vul/"+r.id+"/",{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}));case 2:case"end":return t.stop()}},l)})),j.apply(this,arguments)}function K(){return R.apply(this,arguments)}function R(){return R=(0,p.Z)(a().mark(function l(){return a().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.WY)("/api/vul_download/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},responseType:"blob"}).then(function(t){var D=URL.createObjectURL(new Blob([t])),B="Savior_\u6F0F\u6D1E\u5217\u8868_"+M()().format("LL")+".xls",s=document.createElement("a");s.href=D,s.download=B,s.click(),URL.revokeObjectURL(D)}));case 1:case"end":return d.stop()}},l)})),R.apply(this,arguments)}var u=e(85893),N=function(){var r=(0,W.useRef)(),d=function(){var s=(0,p.Z)(a().mark(function c(n){var o,h;return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=v.default.loading("\u6B63\u5728\u63D0\u4EA4"),h="2",i.next=4,L({id:n,vul_status:h});case 4:return o(),v.default.success("\u590D\u6D4B\u6210\u529F\uFF0C\u5DF2\u4FEE\u590D\uFF01"),r.current.reload(),i.abrupt("return",!0);case 8:case"end":return i.stop()}},c)}));return function(n){return s.apply(this,arguments)}}(),t=function(){var s=(0,p.Z)(a().mark(function c(n){var o,h;return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=v.default.loading("\u6B63\u5728\u63D0\u4EA4"),h="1",i.next=4,L({id:n,vul_status:h});case 4:return o(),v.default.error("\u590D\u6D4B\u6210\u529F\uFF0C\u672A\u4FEE\u590D\uFF01"),r.current.reload(),i.abrupt("return",!0);case 8:case"end":return i.stop()}},c)}));return function(n){return s.apply(this,arguments)}}(),D=function(){var s=(0,p.Z)(a().mark(function c(n){var o;return a().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=v.default.loading("\u6B63\u5728\u63D0\u4EA4"),f.next=3,G({id:n});case 3:return o(),v.default.success("\u6F0F\u6D1E\u5220\u9664\u6210\u529F\uFF01"),r.current.reload(),f.abrupt("return",!0);case 7:case"end":return f.stop()}},c)}));return function(n){return s.apply(this,arguments)}}(),B=[{title:"\u6240\u5C5E\u9879\u76EE",dataIndex:"report_center",valueType:"textarea"},{title:"\u7CFB\u7EDF",dataIndex:"report_systemname",valueType:"textarea"},{title:"\u62A5\u544A\u7F16\u53F7",dataIndex:"report_no",valueType:"textarea"},{title:"\u53D1\u73B0\u4EBA",dataIndex:"report_author",valueType:"textarea"},{title:"\u53D1\u73B0\u65F6\u95F4",dataIndex:"report_end_time",valueType:"date",search:!1},{title:"\u6F0F\u6D1E\u7C7B\u578B",dataIndex:"vul_type_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u540D\u79F0",dataIndex:"vul_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u7B49\u7EA7",dataIndex:"vul_level",filters:!0,onFilter:!0,valueEnum:{1:{text:"\u4F4E\u5371",status:"Success"},2:{text:"\u4E2D\u5371",status:"Warning"},3:{text:"\u9AD8\u5371",status:"Error"}}},{title:"\u6F0F\u6D1EURL",dataIndex:"vul_url",valueType:"textarea",ellipsis:!0,copyable:!0},{title:"\u6F0F\u6D1E\u72B6\u6001",dataIndex:"vul_status",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u65B0\u53D1\u73B0",status:"Warning"},1:{text:"\u672A\u4FEE\u590D",status:"Error"},2:{text:"\u5DF2\u4FEE\u590D",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(c,n){return[(0,u.jsx)(g.Z,{overlay:(0,u.jsxs)(x.Z,{children:[(0,u.jsx)(x.Z.Item,{onClick:function(){d(n.id)},children:"\u5DF2\u4FEE\u590D"},"repairUpdate"),(0,u.jsx)(x.Z.Item,{onClick:function(){t(n.id)},children:"\u672A\u4FEE\u590D"},"repairUpdate")]}),children:(0,u.jsxs)("a",{children:["\u590D\u6D4B ",(0,u.jsx)($.Z,{})]})}),(0,u.jsx)(E.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u6F0F\u6D1E\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:function(){D(n.id)},children:(0,u.jsx)("a",{children:"\u5220\u9664"})},"norepairDelete")]}}];return(0,u.jsx)(V.ZP,{actionRef:r,rowKey:"key",search:{labelWidth:120},request:P,columns:B,toolBarRender:function(){return[(0,u.jsx)(y.Z,{type:"primary",icon:(0,u.jsx)(z.Z,{}),onClick:K,children:"\u5BFC\u51FA\u6570\u636E"},"out")]}})},J=N}}]);
