(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[970],{90631:function(B,m,e){"use strict";e.d(m,{Z:function(){return U}});var g=e(28991),y=e(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Z=R,E=e(27029),p=function(i,I){return y.createElement(E.Z,(0,g.Z)((0,g.Z)({},i),{},{ref:I,icon:Z}))};p.displayName="DownloadOutlined";var U=y.forwardRef(p)},23201:function(B,m,e){"use strict";e.r(m),e.d(m,{default:function(){return H}});var g=e(57663),y=e(71577),R=e(59250),Z=e(13013),E=e(30887),p=e(99210),U=e(34792),f=e(48086),i=e(3182),I=e(94043),r=e.n(I),L=e(67294),C=e(57254),S=e(90631),F=e(24886),A=e(8870),j=e(48971),W=e(30381),z=e.n(W);function $(s){return w.apply(this,arguments)}function w(){return w=(0,i.Z)(r().mark(function s(n){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.WY)("/api/vul/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:(0,A.Z)({},n)}));case 1:case"end":return t.stop()}},s)})),w.apply(this,arguments)}function O(s){return D.apply(this,arguments)}function D(){return D=(0,i.Z)(r().mark(function s(n){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.abrupt("return",(0,j.WY)("/api/vul/"+n.id+"/",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},data:{vul_status:n.vul_status}}));case 2:case"end":return t.stop()}},s)})),D.apply(this,arguments)}function V(){return T.apply(this,arguments)}function T(){return T=(0,i.Z)(r().mark(function s(){return r().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,j.WY)("/api/vul_download/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},responseType:"blob"}).then(function(t){var x=URL.createObjectURL(new Blob([t])),c="Savior_\u6F0F\u6D1E\u5217\u8868_"+z()().format("LL")+".xls",u=document.createElement("a");u.href=x,u.download=c,u.click(),URL.revokeObjectURL(x)}));case 1:case"end":return o.stop()}},s)})),T.apply(this,arguments)}var l=e(85893),Y=function(){var n=(0,L.useRef)(),o=function(){var c=(0,i.Z)(r().mark(function u(d){var v,h;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v=f.default.loading("\u6B63\u5728\u63D0\u4EA4"),h="2",a.next=4,O({id:d,vul_status:h});case 4:return v(),f.default.success("\u590D\u6D4B\u6210\u529F\uFF0C\u5DF2\u4FEE\u590D\uFF01"),n.current.reload(),a.abrupt("return",!0);case 8:case"end":return a.stop()}},u)}));return function(d){return c.apply(this,arguments)}}(),t=function(){var c=(0,i.Z)(r().mark(function u(d){var v,h;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v=f.default.loading("\u6B63\u5728\u63D0\u4EA4"),h="1",a.next=4,O({id:d,vul_status:h});case 4:return v(),f.default.error("\u590D\u6D4B\u6210\u529F\uFF0C\u672A\u4FEE\u590D\uFF01"),n.current.reload(),a.abrupt("return",!0);case 8:case"end":return a.stop()}},u)}));return function(d){return c.apply(this,arguments)}}(),x=[{title:"\u6240\u5C5E\u9879\u76EE",dataIndex:"report_center",valueType:"textarea"},{title:"\u7CFB\u7EDF",dataIndex:"report_systemname",valueType:"textarea"},{title:"\u62A5\u544A\u7F16\u53F7",dataIndex:"report_no",valueType:"textarea"},{title:"\u53D1\u73B0\u4EBA",dataIndex:"report_author",valueType:"textarea"},{title:"\u53D1\u73B0\u65F6\u95F4",dataIndex:"report_end_time",valueType:"date",search:!1},{title:"\u6F0F\u6D1E\u7C7B\u578B",dataIndex:"vul_type_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u540D\u79F0",dataIndex:"vul_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u7B49\u7EA7",dataIndex:"vul_level",filters:!0,onFilter:!0,valueEnum:{1:{text:"\u4F4E\u5371",status:"Success"},2:{text:"\u4E2D\u5371",status:"Warning"},3:{text:"\u9AD8\u5371",status:"Error"}}},{title:"\u6F0F\u6D1EURL",dataIndex:"vul_url",valueType:"textarea",ellipsis:!0,copyable:!0},{title:"\u6F0F\u6D1E\u72B6\u6001",dataIndex:"vul_status",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u65B0\u53D1\u73B0",status:"Warning"},1:{text:"\u672A\u4FEE\u590D",status:"Error"},2:{text:"\u5DF2\u4FEE\u590D",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,d){return[(0,l.jsx)(Z.Z,{overlay:(0,l.jsxs)(p.Z,{children:[(0,l.jsx)(p.Z.Item,{onClick:function(){o(d.id)},children:"\u5DF2\u4FEE\u590D"},"repairUpdate"),(0,l.jsx)(p.Z.Item,{onClick:function(){t(d.id)},children:"\u672A\u4FEE\u590D"},"repairUpdate")]}),children:(0,l.jsxs)("a",{children:["\u590D\u6D4B ",(0,l.jsx)(C.Z,{})]})})]}}];return(0,l.jsx)(F.ZP,{actionRef:n,rowKey:"key",search:{labelWidth:120},request:$,columns:x,toolBarRender:function(){return[(0,l.jsx)(y.Z,{type:"primary",icon:(0,l.jsx)(S.Z,{}),onClick:V,children:"\u5BFC\u51FA\u6570\u636E"},"out")]}})},H=Y}}]);
